(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(18),s=n.n(r),l=n(5),o=n(0),i=function(){return Object(o.jsx)("div",{className:"p-4 flex flex-row-reverse",children:Object(o.jsx)("p",{className:"text-xs",children:"janlopezdelaosa@gmail.com"})})},u=n(13),d=n.n(u),j=function(){return Object(o.jsxs)("div",{className:"p-4 md:px-20 flex justify-between items-center",children:[Object(o.jsx)("h2",{className:"font-extrabold uppercase lg:text-2xl",children:"Weather Forecaster"}),Object(o.jsx)("p",{className:"text-xs lg:text-lg",children:d()().format("MMMM D, YYYY | HH:mm")})]})},x=n(10),b=n.n(x),f=n(14),m=n(34),h="https://morning-falls-52071.herokuapp.com";var O=function(){var e="".concat(h,"/locations");return Object(m.a)("locations",Object(f.a)(b.a.mark((function t(){var n,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=10;break}return t.next=6,n.json();case 6:throw c=t.sent,new Error(c.msg);case 10:return t.abrupt("return",n.json());case 11:case"end":return t.stop()}}),t)})))).data},p=function(e){var t=e.fill,n=void 0===t?"currentColor":t,c=e.className,a=void 0===c?"":c,r=e.onClick,s=void 0===r?function(){}:r;return Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:n,className:a,onClick:s,children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})},v=function(e){var t=e.fill,n=void 0===t?"currentColor":t,c=e.className,a=void 0===c?"":c,r=e.onClick,s=void 0===r?function(){}:r;return Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:n,className:a,onClick:s,children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};var g=function(e,t){var n=Object(c.useState)(e),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r},w=function(e){var t=e.message,n=void 0===t?"There is no available data.":t,c=e.suggestion,a=void 0===c?"Try another city from the list.":c;return Object(o.jsxs)("div",{className:"p-4 md:p-6 self-center text-center",children:[Object(o.jsx)("p",{"data-cy":"msg",children:n}),Object(o.jsx)("p",{children:a})]})},y=function(e){var t=e.setCity,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],s=a[1],i=g(r,500),u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],x=d[1],b=O(),f=Object(c.useCallback)((function(e,n){var c=null===b||void 0===b?void 0:b.filter((function(t){return"".concat(t.name,", ").concat(t.country)===e}))[0];void 0!==c?(t(c.slug),x(!0)):(t(""),x(!1))}),[t,b]);return Object(c.useEffect)((function(){f(i,b)}),[f,i,b]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"flex flex-col w-full",children:[Object(o.jsxs)("div",{className:"relative w-full",children:[Object(o.jsx)("input",{className:"w-full pl-10 lg:pl-14 pr-1 py-1 border-black border-solid rounded-lg border-2 outline-none ".concat(j?"font-bold":""," lg:text-xl"),"data-cy":"input",type:"text",placeholder:"City, Country",list:"cities",onChange:function(e){return s(e.target.value)},value:r}),Object(o.jsxs)("div",{className:"absolute inset-0 flex items-align justify-between pointer-events-none",children:[Object(o.jsx)(p,{className:"ml-3 lg:ml-5 w-5"}),r&&Object(o.jsx)(v,{className:"mr-7 lg:mr-10 w-5 pointer-events-auto",onClick:function(){s(""),t(""),x(!1)}})]})]}),Object(o.jsx)("datalist",{id:"cities",children:b&&b.map((function(e){return Object(o.jsx)("option",{onMouseOver:function(){return console.log("Focusing "+e.slug)},children:"".concat(e.name,", ").concat(e.country)},e.slug)}))}),!j&&r&&Object(o.jsx)(w,{message:'Location "'.concat(i,"\" doesn't exist in our database.")})]})})},N=n(16),k=function(e){var t=e.isSelected,n=e.date,c=e.max,a=e.min,r=e.onClick;return Object(o.jsxs)("button",{className:"p-4 md:p-6 m-2 md:m-4 flex flex-col items-center border-black border-solid rounded-lg border-2 outline-none transform hover:scale-105".concat(t?" font-bold":""),"data-cy":"summary",onClick:r,children:[Object(o.jsx)("p",{className:"text-xl lg:text-2xl",children:d()(n,"MM-DD-YYYY").format("DD MMM")}),Object(o.jsx)("div",{className:"flex flex-row justify-between lg:text-lg",children:Object(o.jsxs)("p",{children:[a,"\xba / ",c,"\xba"]})})]})};var M=function(e,t,n){var c="".concat(h,"/forecast"),a="location=".concat(e),r="start=".concat(t),s="end=".concat(n);return Object(m.a)(["forecast",e,t,n],Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(c,"?").concat(a,"&").concat(r,"&").concat(s));case 2:if((t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:throw n=e.sent,new Error(n.msg);case 10:return e.abrupt("return",t.json());case 11:case"end":return e.stop()}}),e)})))).data},C=function(e){var t=e.hourly,n=Object(c.useState)(-1),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(o.jsx)("div",{className:"pt-8 grid grid-cols-2 md:grid-cols-6 grid-rows-12 md:grid-rows-4 grid-flow-col gap-y-2 md:gap-y-10 gap-x-12",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(o.jsxs)("button",{className:"flex flex-row items-center","data-cy":"hourly",onClick:function(){return s(t)},children:[Object(o.jsxs)("span",{className:"".concat(r===t?"font-normal":"font-light"," md:text-lg"),children:[t,"h:"]})," ",Object(o.jsxs)("span",{className:"".concat(r===t?"font-bold":"font-normal"," ml-1 md:ml-3 text-lg md:text-xl"),children:[e,"\xba"]})]},t)}))})},S=function(e){var t=e.city,n=e.days,a=void 0===n?5:n,r=new Date,s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0)),i=s.toISOString().split("T")[0],u=new Date(s);u.setDate(u.getDate()+a);var d=u.toISOString().split("T")[0],j=M(t,i,d),x=Object(c.useState)([]),b=Object(l.a)(x,2),f=b[0],m=b[1],h=Object(c.useState)(-1),O=Object(l.a)(h,2),p=O[0],v=O[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"p-2 md:p-4 flex flex-wrap flex-row justify-center",children:void 0!==j&&j.length>0?null===j||void 0===j?void 0:j.map((function(e,t){var n=Math.min.apply(Math,Object(N.a)(e.hourly)),c=Math.max.apply(Math,Object(N.a)(e.hourly));return Object(o.jsx)(k,{isSelected:t===p,date:e.date,max:c,min:n,onClick:function(){m(e.hourly),v(t)}},t)})):Object(o.jsx)(w,{message:"No forecast data for any of the following 5 days."})}),0!==f.length&&Object(o.jsx)(C,{hourly:f})]})},D=n(33),E=n(19),Y=n(20),z=n(21),T=n(23),F=n(22),L=function(e){Object(T.a)(n,e);var t=Object(F.a)(n);function n(e){var c;return Object(Y.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(z.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(o.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),R=function(){return Object(o.jsx)("div",{className:"p-2 md:p-4",children:Object(o.jsx)("p",{className:"text-xs",children:"Loading..."})})},B=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=new D.a({defaultOptions:{queries:{suspense:!0}}});return Object(o.jsxs)(E.a,{client:r,children:[Object(o.jsxs)("div",{className:"fixed top-0 left-0 right-0 bg-white z-10",children:[Object(o.jsx)(j,{}),Object(o.jsx)("div",{className:"p-4 md:px-20 w-full flex justify-center",children:Object(o.jsx)(L,{children:Object(o.jsx)(c.Suspense,{fallback:Object(o.jsx)(R,{}),children:Object(o.jsx)(y,{setCity:a})})})})]}),Object(o.jsx)("div",{className:"pt-32 pb-16 flex flex-col w-full items-center",children:Object(o.jsx)(L,{children:Object(o.jsx)(c.Suspense,{fallback:Object(o.jsx)(R,{}),children:""!==n&&Object(o.jsx)(S,{city:n})})})}),Object(o.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white z-10",children:Object(o.jsx)(i,{})})]})};n(30);s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(B,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.8d4ac972.chunk.js.map