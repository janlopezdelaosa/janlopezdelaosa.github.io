(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(18),s=c.n(r),l=c(5),o=c(33),i=c(19),u=c(13),d=c.n(u),j=c(0),f=function(){return Object(j.jsxs)("div",{className:"p-4 md:px-20 flex justify-between items-center",children:[Object(j.jsx)("h2",{className:"font-extrabold uppercase lg:text-2xl",children:"Weather Forecaster"}),Object(j.jsx)("p",{className:"text-xs lg:text-lg",children:d()().format("MMMM D, YYYY | HH:mm")})]})},b=function(){return Object(j.jsx)("div",{className:"p-4 flex flex-row-reverse",children:Object(j.jsx)("p",{className:"text-xs",children:"janlopezdelaosa@gmail.com"})})},x=c(10),m=c.n(x),h=c(14),p=c(34),O="https://morning-falls-52071.herokuapp.com";var v=function(){var e="".concat(O,"/locations");return Object(p.a)("locations",Object(h.a)(m.a.mark((function t(){var c,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((c=t.sent).ok){t.next=10;break}return t.next=6,c.json();case 6:throw n=t.sent,new Error(n.msg);case 10:return t.abrupt("return",c.json());case 11:case"end":return t.stop()}}),t)})))).data};var g=function(e,t){var c=Object(n.useState)(e),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var c=setTimeout((function(){s(e)}),t);return function(){clearTimeout(c)}}),[e,t]),r},w=function(e){var t=e.className,c=void 0===t?"":t,n=e.message,a=void 0===n?"There is no available data.":n,r=e.suggestion,s=void 0===r?"Try another city from the list.":r;return Object(j.jsxs)("div",{className:"p-4 md:p-6 self-center text-center ".concat(c),children:[Object(j.jsx)("p",{"data-cy":"msg",children:a}),Object(j.jsx)("p",{children:s})]})},y=function(e){var t=e.fill,c=void 0===t?"currentColor":t,n=e.className,a=void 0===n?"":n,r=e.onClick,s=void 0===r?function(){}:r;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:c,className:a,onClick:s,children:Object(j.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})},N=function(e){var t=e.fill,c=void 0===t?"currentColor":t,n=e.className,a=void 0===n?"":n,r=e.onClick,s=void 0===r?function(){}:r;return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:c,className:a,onClick:s,children:Object(j.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})},k=function(e){var t=e.setCity,c=Object(n.useState)(""),a=Object(l.a)(c,2),r=a[0],s=a[1],o=g(r,500),i=Object(n.useState)(!1),u=Object(l.a)(i,2),d=u[0],f=u[1],b=v(),x=Object(n.useCallback)((function(e,c){var n=null===b||void 0===b?void 0:b.filter((function(t){return"".concat(t.name,", ").concat(t.country)===e}))[0];void 0!==n?(t(n.slug),f(!0)):(t(""),f(!1))}),[t,b]);return Object(n.useEffect)((function(){x(o,b)}),[x,o,b]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"flex flex-col w-full",children:[Object(j.jsxs)("div",{className:"relative w-full",children:[Object(j.jsx)("input",{className:"w-full pl-10 lg:pl-14 pr-1 py-1 border-black border-solid rounded-lg border-2 outline-none ".concat(d?"font-bold":""," lg:text-xl"),"data-cy":"input",type:"text",placeholder:"City, Country",list:"cities",onChange:function(e){return s(e.target.value)},value:r}),Object(j.jsxs)("div",{className:"absolute inset-0 flex items-align justify-between pointer-events-none",children:[Object(j.jsx)(y,{className:"ml-3 lg:ml-5 w-5"}),r&&Object(j.jsx)(N,{className:"mr-7 lg:mr-10 w-5 pointer-events-auto",onClick:function(){s(""),t(""),f(!1)}})]})]}),Object(j.jsx)("datalist",{id:"cities",children:b&&b.map((function(e){return Object(j.jsx)("option",{children:"".concat(e.name,", ").concat(e.country)},e.slug)}))}),!d&&r&&Object(j.jsx)(w,{className:"pt-11 md:pt-12",message:'Location "'.concat(o,"\" doesn't exist in our database.")})]})})},C=c(16);var M=function(e,t,c){var n="".concat(O,"/forecast"),a="location=".concat(e),r="start=".concat(t),s="end=".concat(c);return Object(p.a)(["forecast",e,t,c],Object(h.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n,"?").concat(a,"&").concat(r,"&").concat(s));case 2:if((t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:throw c=e.sent,new Error(c.msg);case 10:return e.abrupt("return",t.json());case 11:case"end":return e.stop()}}),e)}))),{refetchInterval:5e3}).data},S=function(e){var t=e.isSelected,c=e.date,n=e.max,a=e.min,r=e.onClick;return Object(j.jsxs)("button",{className:"p-4 md:p-6 m-2 md:m-4 flex flex-col items-center border-black border-solid rounded-lg border-2 outline-none transform hover:scale-105".concat(t?" font-bold":""," focus:outline-none"),"data-cy":"summary",onClick:r,children:[Object(j.jsx)("p",{className:"text-xl lg:text-2xl",children:d()(c,"MM-DD-YYYY").format("DD MMM")}),Object(j.jsx)("div",{className:"flex flex-row justify-between lg:text-lg",children:Object(j.jsxs)("p",{children:[a,"\xba / ",n,"\xba"]})})]})},D=function(e){var t=e.hourly,c=Object(n.useState)(-1),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(j.jsx)("div",{className:"pt-8 grid grid-cols-2 md:grid-cols-6 grid-rows-12 md:grid-rows-4 grid-flow-col gap-y-2 md:gap-y-10 gap-x-12",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(j.jsxs)("button",{className:"flex flex-row items-center focus:outline-none","data-cy":"hourly",onClick:function(){return s(t)},children:[Object(j.jsxs)("span",{className:"".concat(r===t?"font-normal":"font-light"," md:text-lg"),children:[t,"h:"]})," ",Object(j.jsxs)("span",{className:"".concat(r===t?"font-bold":"font-normal"," ml-1 md:ml-3 text-lg md:text-xl"),children:[e,"\xba"]})]},t)}))})},E=function(e){var t=e.city,c=e.days,a=void 0===c?5:c,r=new Date,s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0)),o=s.toISOString().split("T")[0],i=new Date(s);i.setDate(i.getDate()+a);var u=i.toISOString().split("T")[0],d=M(t,o,u),f=Object(n.useState)([]),b=Object(l.a)(f,2),x=b[0],m=b[1],h=Object(n.useState)(-1),p=Object(l.a)(h,2),O=p[0],v=p[1];return Object(n.useEffect)((function(){var e;-1!==O&&m(null===(e=d[O])||void 0===e?void 0:e.hourly)}),[d,O]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"p-2 md:p-4 flex flex-wrap flex-row justify-center",children:void 0!==d&&d.length>0?null===d||void 0===d?void 0:d.map((function(e,t){var c=Math.min.apply(Math,Object(C.a)(e.hourly)),n=Math.max.apply(Math,Object(C.a)(e.hourly));return Object(j.jsx)(S,{isSelected:t===O,date:e.date,max:n,min:c,onClick:function(){m(e.hourly),v(t)}},t)})):Object(j.jsx)(w,{message:"No forecast data for any of the following 5 days."})}),0!==x.length&&Object(j.jsx)(D,{hourly:x})]})},Y=c(20),z=c(21),T=c(23),L=c(22),F=function(e){Object(T.a)(c,e);var t=Object(L.a)(c);function c(e){var n;return Object(Y.a)(this,c),(n=t.call(this,e)).state={hasError:!1},n}return Object(z.a)(c,[{key:"render",value:function(){return this.state.hasError?Object(j.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),c}(a.a.Component),I=function(e){var t=e.className,c=void 0===t?"":t,n=e.resource,a=void 0===n?"":n;return Object(j.jsx)("div",{className:"p-2 md:p-4 ".concat(c),children:Object(j.jsxs)("p",{children:["Loading",a&&" "+a,"..."]})})},R=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],r=new o.a({defaultOptions:{queries:{suspense:!0}}});return Object(j.jsxs)(i.a,{client:r,children:[Object(j.jsxs)("div",{className:"fixed top-0 left-0 right-0 bg-white z-10",children:[Object(j.jsx)(f,{}),Object(j.jsx)("div",{className:"p-4 md:px-20 w-full flex justify-center",children:Object(j.jsx)(F,{children:Object(j.jsx)(n.Suspense,{fallback:Object(j.jsx)(I,{resource:"locations"}),children:Object(j.jsx)(k,{setCity:a})})})})]}),Object(j.jsx)("div",{className:"pt-32 pb-16 flex flex-col w-full items-center",children:Object(j.jsx)(F,{children:Object(j.jsx)(n.Suspense,{fallback:Object(j.jsx)(I,{className:"p-8 md:p-14",resource:"forecasts"}),children:""!==c&&Object(j.jsx)(E,{city:c})})})}),Object(j.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white z-10",children:Object(j.jsx)(b,{})})]})};c(30);s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(R,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.822990c5.chunk.js.map